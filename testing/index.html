<!DOCTYPE html>
<html>
  <head>
    <title>Scientific Programming</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.49.2" />
<title>Testing Scientific Code :: Scientific Programming</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/scientific-programming.github.io";
</script>
<meta name="description" content="">



    
  </head>
  <body data-url="/testing/">
    
      <header>
  <div class="logo">
    
	
  
    <a class="baselink" href="https://scientific-programming.github.io">Scientific Programming</a>
  
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>




  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
    <nav class="shortcuts">
            <li class="" role="">
                <a href="https://github.com/scientific-programming"  rel="noopener">
                  <i class='fa fa-github'></i> <label>Github repo</label>
                </a>
            </li>
            <li class="" role="">
                <a href="https://gohugo.io/"  rel="noopener">
                  <i class='fa fa-bookmark'></i> <label>Hugo Documentation</label>
                </a>
            </li>
            <li class="" role="">
                <a href="/credits"  rel="noopener">
                  <i class='fa fa-bullhorn'></i> <label>Credits</label>
                </a>
            </li>
    </nav>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/" class="dd-item">
          <a href="/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/introduction/" class="dd-item
        ">
      <div>
      <a href="/introduction/">Software Engineering in Science</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/containers/" class="dd-item haschildren
        ">
      <div>
      <a href="/containers/">Containers</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/containers/tutorial/" class="dd-item">
        <div>
          <a href="/containers/tutorial/">
            Getting Started with Docker
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/testing/" class="dd-item parent active haschildren
        ">
      <div>
      <a href="/testing/">Testing Scientific Code</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/testing/complex-tests/" class="dd-item">
        <div>
          <a href="/testing/complex-tests/">
            Writing Complex Tests
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/testing/simple-tests/" class="dd-item">
        <div>
          <a href="/testing/simple-tests/">
            Writing Simple Tests
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/testing/continuous-integration/" class="dd-item">
        <div>
          <a href="/testing/continuous-integration/">
            Continuous Integration
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/testing/writing-tests/" class="dd-item">
        <div>
          <a href="/testing/writing-tests/">
            Writing Tests
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/version-control/" class="dd-item haschildren
        ">
      <div>
      <a href="/version-control/">Version Control</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/version-control/tutorial1/" class="dd-item">
        <div>
          <a href="/version-control/tutorial1/">
            Getting Started
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/version-control/tutorial2/" class="dd-item">
        <div>
          <a href="/version-control/tutorial2/">
            GitHub and Collaborating
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/version-control/tutorial3/" class="dd-item">
        <div>
          <a href="/version-control/tutorial3/">
            Discarding Temporary Changes
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/documentation/" class="dd-item haschildren
        ">
      <div>
      <a href="/documentation/">Documentation</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/documentation/generating-docs/" class="dd-item">
        <div>
          <a href="/documentation/generating-docs/">
            Generating Docs
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/documentation/generating-sphinx/" class="dd-item">
        <div>
          <a href="/documentation/generating-sphinx/">
            Generating documentation with Sphinx
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/documentation/writing-docs/" class="dd-item">
        <div>
          <a href="/documentation/writing-docs/">
            Sphinx: Python documentation
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/cheatsheet/" class="dd-item
        ">
      <div>
      <a href="/cheatsheet/">Command Cheatsheet</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/introduction/" >
   Software Engineering in Science</option>
    <option value="/containers/" >
   Containers</option>
    <option value="/testing/"  selected>
   Testing Scientific Code</option> 
      <option value="/testing/complex-tests/" >- Writing Complex Tests</option>
      <option value="/testing/simple-tests/" >- Writing Simple Tests</option>
      <option value="/testing/continuous-integration/" >- Continuous Integration</option>
      <option value="/testing/writing-tests/" >- Writing Tests</option>
  
    <option value="/version-control/" >
   Version Control</option>
    <option value="/documentation/" >
   Documentation</option>
    <option value="/cheatsheet/" >
   Command Cheatsheet</option>



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/js/lunr.min.js"></script>
        <script type="text/javascript" src="/js/auto-complete.js"></script>
        <link href="/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/scientific-programming.github.io";
          
        </script>
        <script type="text/javascript" src="/js/search.js"></script>
      </div>
    

    <h1>Testing Scientific Code</h1>
    
    
    



<h3 id="what-is-a-software-test">What is a software test?</h3>

<p>Software tests are written in order to check that the implementation of software is correct, and to guard against dangerous behaviour. They&rsquo;re used to make software run in a safer manner; if we know what the inputs and outputs of sofware should be, and we know that for those inputs the answer is correct, we can have some confidence that the software is correct.</p>

<p>Why is this important? Consider how science works in experimental science. We try and apply the scientific method:</p>

<div class="panel panel-info">
	<div class="panel-heading">Scientific Method</div>
	<div class="panel-body"><p>A set of rough principles:</p>

<ul>
<li>Ask a question.</li>
<li>Form a hypothesis.</li>
<li>Make a prediction based on the hypothesis.</li>
<li>Design an experiment to test the hypothesis.</li>
<li>Build the equipment</li>
<li><strong>Calibrate equipment by testing it</strong></li>
<li>Run the experiment</li>
<li>Detail carefully the procedures and record information.</li>
<li>Draw conclusions from results.</li>
</ul>
</div>
	
</div>


<p>Consider whether, when writing software to do science, you check that your &lsquo;equipment&rsquo; is calibrated? In many cases, the answer will be no.</p>

<p>Why might this be the case? Often ad-hoc changes are made to code which mean things stop working. Have you ever come back to a script that you wrote and found it no longer works because you changed a file somewhere else? These issues become especially common when multiple people, who might not have oversight over what you are using it for, are working on software.</p>

<p>In this tutorial, we&rsquo;ll step through some examples in the Python language which aim to show how you can write tests, and incorporate them into your own software in practice.</p>

<h3 id="starting-off-simply-squaring-a-number">Starting off simply: Squaring a number</h3>

<p>Consider as an example, a function which takes a number and computes the square of that number.</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#00a8c8">def</span> <span style="color:#75af00">square</span><span style="color:#111">(</span><span style="color:#111">x</span><span style="color:#111">):</span>
    <span style="color:#00a8c8">return</span> <span style="color:#111">x</span> <span style="color:#f92672">*</span> <span style="color:#111">x</span></code></pre></div>
<p>Various appropriate tests of this could check:</p>

<ul>
<li>Is the correct answer given for positive integers?</li>
<li>Is the correct answer given for negative integers?</li>
<li>Is the correct answer given for zero?</li>
<li>Is the correct answer given for positive and negative decimals?</li>
<li>What is the behaviour for complex numbers?</li>
<li>How does the function behave when an input argument is not of the type specified is passed in (such as a string)?</li>
</ul>

<p>It&rsquo;s clear that all of these would be sensible, but considering it carefully, it shows immediately the difficulty of actually applying testing in practice. There are an infinite amount of numerical input arguments - we cannot reasonably test them all.</p>

<h3 id="principles-of-software-testing">Principles of Software Testing</h3>

<ul>
<li><p>Software must meet the requirements</p></li>

<li><p>Software must respond correctly to different inputs</p></li>

<li><p>Software must run in a reasonable amount of time</p></li>

<li><p>Can be installed and run in the intended environment</p></li>
</ul>

<h3 id="static-vs-dynamic-testing">Static vs Dynamic Testing</h3>

<p>[Static Testing]{}</p>

<ul>
<li><p>Reviews - Reviewing the code manually as a group.</p></li>

<li><p>Walthrough - Parties go through a products specification to give
feedback on potential defects.</p></li>

<li><p><strong>Verification of design</strong></p></li>
</ul>

<p>[Dynamic Testing]{}</p>

<ul>
<li><p>Executing portions of the code and checking the response.</p></li>

<li><p><strong>Validation of design</strong></p></li>
</ul>

<h3 id="why-is-it-difficult-for-science">Why is it difficult for science?</h3>

<ul>
<li><p>Much of the time you don’t know what the results will be.</p></li>

<li><p>Realistic problems can take time to run.</p></li>
</ul>

<p>-</p>

<h3 id="why-is-it-crucial-for-science">Why is it crucial for science?</h3>

<ul>
<li><p>Often need to implement new algorithms or change things.</p></li>

<li><p>Changing without testing will break things.</p></li>

<li><p>You might need to come back to a previous experiment to use it as
the basis for a new one; if the code is broken, you will have
issues!</p></li>
</ul>

<h3 id="dynamic-testing-types-of-test">Dynamic Testing: Types of Test</h3>

<h5 id="unit-tests">Unit Tests</h5>

<ul>
<li><p>Code is written in small, independent functions</p></li>

<li><p>Each function has tests that check that the result makes sense</p></li>

<li><p>For e.g. a test of a function that calculates sin could check
$\sin{\left(n\pi\right)} = 0 \,\,\,\,\, \forall n \in \mathbb{Z}$</p></li>
</ul>

<h5 id="integration-tests">Integration Tests</h5>

<ul>
<li><p>Tests check that the system as a whole works convincingly.</p></li>

<li><p>For e.g. a test of a molecular dynamics code might test that the
pressure is close to the expected value after some equilibrium time.</p></li>

<li><p>Much, much harder to design, but essential - can be written so that
they also serve as examples of how to use the software.</p></li>
</ul>

<h5 id="regression-tests">Regression Tests</h5>

<ul>
<li><p>Check that results don’t get less accurate over time.</p></li>

<li><p>Check that performance stays the same or gets better over time.</p></li>
</ul>

<h3 id="aside-test-driven-development">Aside: Test Driven Development</h3>

<p>Methodology for testing where <strong>tests are written before writing any
code</strong>.</p>

<p>This means that&hellip;</p>

<ul>
<li>Before writing any code you need to plan out what the interface should be (i.e. what arguments get passed to functions).</li>
<li>You must work out what the <em>output</em> should be before writing any code.</li>
<li>Can form part of the ’agile’ methodology for software development.</li>
<li>Can be difficult for developing scientific code where answers can be difficult to determine in advance.</li>
</ul>



    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/containers/tutorial/" title="Getting Started with Docker"> <i class="fa fa-chevron-left"></i><label>Getting Started with Docker</label></a>
    <a class="nav nav-next" href="/testing/complex-tests/" title="Writing Complex Tests" style="margin-right: 0px;"><label>Writing Complex Tests</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

    
    <div class="date">
        <i class='fa fa-calendar'></i> Last update on 26/10/2018
    </div>
    

    
    <div class="github-link">
      <a href="https://github.com/vjeantet/hugo-theme-docdock/edit/master/exampleSite/content/testing/_index.md" target="blank"><i class="fa fa-code-fork"></i>
        Improve this page</a>
    </div>
    
  </div>


	<div>


  
    Create a content/_footer.md file to customize the footer content
  



	</div>
</footer>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>



<script src="/theme-flex/script.js"></script>


    

    
    

    
  </body>
</html>