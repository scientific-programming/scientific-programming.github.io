<!DOCTYPE html>
<html>
  <head>
    <title>Scientific Programming</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.49.2" />
<title>Writing Simple Tests :: Scientific Programming</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/scientific-programming.github.io";
</script>
<meta name="description" content="">



    
  </head>
  <body data-url="/testing/simple-tests/">
    
      <header>
  <div class="logo">
    
	
  
    <a class="baselink" href="https://scientific-programming.github.io">Scientific Programming</a>
  
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>




  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
    <nav class="shortcuts">
            <li class="" role="">
                <a href="https://github.com/scientific-programming"  rel="noopener">
                  <i class='fa fa-github'></i> <label>Github repo</label>
                </a>
            </li>
            <li class="" role="">
                <a href="https://gohugo.io/"  rel="noopener">
                  <i class='fa fa-bookmark'></i> <label>Hugo Documentation</label>
                </a>
            </li>
            <li class="" role="">
                <a href="/credits"  rel="noopener">
                  <i class='fa fa-bullhorn'></i> <label>Credits</label>
                </a>
            </li>
    </nav>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/" class="dd-item">
          <a href="/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/introduction/" class="dd-item
        ">
      <div>
      <a href="/introduction/">Software Engineering in Science</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/containers/" class="dd-item haschildren
        ">
      <div>
      <a href="/containers/">Containers</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/containers/tutorial1/" class="dd-item">
        <div>
          <a href="/containers/tutorial1/">
            Setting up the Software
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/containers/tutorial2/" class="dd-item">
        <div>
          <a href="/containers/tutorial2/">
            Getting Started with Docker
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/containers/tutorial3/" class="dd-item">
        <div>
          <a href="/containers/tutorial3/">
            Saving and Sharing Images
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/version-control/" class="dd-item haschildren
        ">
      <div>
      <a href="/version-control/">Version Control</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/version-control/tutorial1/" class="dd-item">
        <div>
          <a href="/version-control/tutorial1/">
            Getting Started
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/version-control/tutorial2/" class="dd-item">
        <div>
          <a href="/version-control/tutorial2/">
            GitHub and Collaborating
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/version-control/tutorial3/" class="dd-item">
        <div>
          <a href="/version-control/tutorial3/">
            Discarding Temporary Changes
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/documentation/" class="dd-item haschildren
        ">
      <div>
      <a href="/documentation/">Documentation</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/documentation/generating-docs/" class="dd-item">
        <div>
          <a href="/documentation/generating-docs/">
            Documenting Code
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/documentation/generating-sphinx/" class="dd-item">
        <div>
          <a href="/documentation/generating-sphinx/">
            Generating documentation webpages with Sphinx
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/testing/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/testing/">Testing Scientific Code</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/testing/simple-tests/" class="dd-item active">
        <div>
          <a href="/testing/simple-tests/">
            Writing Simple Tests
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/testing/complex-tests/" class="dd-item">
        <div>
          <a href="/testing/complex-tests/">
            Writing More Complex Tests
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/testing/continuous-integration/" class="dd-item">
        <div>
          <a href="/testing/continuous-integration/">
            Continuous Integration
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/cheatsheet/" class="dd-item
        ">
      <div>
      <a href="/cheatsheet/">Command Cheatsheet</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/introduction/" >
   Software Engineering in Science</option>
    <option value="/containers/" >
   Containers</option>
    <option value="/version-control/" >
   Version Control</option>
    <option value="/documentation/" >
   Documentation</option>
    <option value="/testing/" >
   Testing Scientific Code</option> 
      <option value="/testing/simple-tests/"  selected>- Writing Simple Tests</option>
      <option value="/testing/complex-tests/" >- Writing More Complex Tests</option>
      <option value="/testing/continuous-integration/" >- Continuous Integration</option>
  
    <option value="/cheatsheet/" >
   Command Cheatsheet</option>



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/js/lunr.min.js"></script>
        <script type="text/javascript" src="/js/auto-complete.js"></script>
        <link href="/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/scientific-programming.github.io";
          
        </script>
        <script type="text/javascript" src="/js/search.js"></script>
      </div>
    

    <h1>Writing Simple Tests</h1>
    
    
    
    

<h4 id="set-up">Set up</h4>

<p>Create a folder for this lecture:</p>

<pre><code>mkdir python-testing
cd python-testing-tutorial
git init
</code></pre>

<p>For this workshop, build the following Dockerfile, and label it &lsquo;testing&rsquo;. Pip is a package manager for Python; using it, we can install Python libraries.
We&rsquo;ll install the following:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-docker" data-lang="docker"><span style="color:#00a8c8">from</span><span style="color:#d88200"> ubuntu:18.04</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#00a8c8">RUN</span> apt-get update <span style="color:#f92672">&amp;&amp;</span> apt-get install -y python3 python3-pip<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#00a8c8">RUN</span> pip install numpy matplotlib<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#00a8c8">WORKDIR</span><span style="color:#d88200"> /app</span></code></pre></div>
<h4 id="starting-off-simply-squaring-a-number-a-pathological-example">Starting off simply: Squaring a number (a pathological example&hellip;)</h4>

<pre><code>def squared(x):
    return x*x
</code></pre>

<p>Consider just squaring a number. This is so simple, it wouldn&rsquo;t really be tested in a real piece of software, but we&rsquo;ll show it here just as an example of how to do it. What could we check?</p>

<ul>
<li>Do we get the correct answer for positive numbers?</li>
<li>Do we get the correct answer for negative numbers?</li>
<li>Do the input arguments make sense?</li>
</ul>

<p>It&rsquo;s clear that all of these would be sensible, but considering it carefully, it shows immediately the difficulty of actually applying testing in practice. There are an infinite amount of numerical input arguments - we cannot reasonably test them all.</p>

<p>How can we therefore reduce it down to a more manageable set of tests? We by necessity have to restrict our tests to a subset of all of the possible outcomes, and have to exercise some thought.</p>

<p>In Python, we can write tests using the Pytest framework. Pytest goes through all of the files in a directory with a &ldquo;.py&rdquo; file extension, and looks for normal Python functions which have names that start with &ldquo;test&rdquo;. It then runs all of these functions in sequence.</p>

<p>In general, it&rsquo;s a good idea to write tests in a separate file to the function implementation.</p>

<p>So, to keep track of what we&rsquo;re doing, we&rsquo;ll create a new folder and a new Git repository:</p>

<p>In this folder, we&rsquo;ll create &lsquo;functions.py&rsquo; and &lsquo;test_functions.py&rsquo;</p>

<p>In functions.py add the function from above.</p>

<p>Now, in test_functions.py, we&rsquo;ll write a test. As mentioned before, you write a normal Python function. However, we use something that you may not have seen before - the assert statement. Asserts just check that something is true; for example:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#111">x</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
<span style="color:#00a8c8">assert</span> <span style="color:#111">x</span><span style="color:#f92672">**</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">4</span></code></pre></div>
<p>If you need to, you can provide an error message if an assertion fails:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#00a8c8">assert</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;The number 2 does not equal 1...&#34;</span></code></pre></div>
<p>Add the following function to test_functions.py:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#00a8c8">def</span> <span style="color:#75af00">test_square_positive_integers</span><span style="color:#111">():</span>
    <span style="color:#00a8c8">assert</span> <span style="color:#111">square</span><span style="color:#111">(</span><span style="color:#ae81ff">1</span><span style="color:#111">)</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>
    <span style="color:#75715e"># Note the mistake here! We&#39;ll leave this here to</span>
    <span style="color:#75715e"># show what happens when a test fails.</span>
    <span style="color:#00a8c8">assert</span> <span style="color:#111">square</span><span style="color:#111">(</span><span style="color:#ae81ff">2</span><span style="color:#111">)</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">8</span>
    <span style="color:#00a8c8">assert</span> <span style="color:#111">square</span><span style="color:#111">(</span><span style="color:#ae81ff">4</span><span style="color:#111">)</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">16</span>
    <span style="color:#00a8c8">assert</span> <span style="color:#111">square</span><span style="color:#111">(</span><span style="color:#ae81ff">100</span><span style="color:#111">)</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">10000</span></code></pre></div>
<p>Now, using our Docker knowledge from before, we&rsquo;re going to run this test with Python from a container. Create a Dockerfile with the following contents:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-docker" data-lang="docker"><span style="color:#00a8c8">from</span><span style="color:#d88200"> ubuntu:18.04</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#00a8c8">RUN</span> apt-get update<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#00a8c8">RUN</span> apt-get install -y python3<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#00a8c8">RUN</span> pip3 install pytest<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#00a8c8">WORKDIR</span><span style="color:#d88200"> /io</span></code></pre></div>
<p>Here, we&rsquo;re using Pip, the Python package installer to install the Python package pytest.</p>

<p>Build the container:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker build . -t python-testing</code></pre></div>
<p>Now, we can run the tests with:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker run -v<span style="color:#00a8c8">$(</span><span style="color:#111">pwd</span><span style="color:#00a8c8">)</span>:/io python-testing pytest -v .</code></pre></div>
<p>You should see output something like this:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">=============================</span> <span style="color:#111">test</span> session <span style="color:#111">starts</span> <span style="color:#f92672">==============================</span>
platform linux -- Python <span style="color:#ae81ff">3</span>.6.6, pytest-3.9.2, py-1.7.0, pluggy-0.8.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /io, inifile:
collecting ... collected <span style="color:#ae81ff">1</span> item

test_functions.py::test_square_positive_integers FAILED                  <span style="color:#f92672">[</span><span style="color:#ae81ff">100</span>%<span style="color:#f92672">]</span>

<span style="color:#f92672">===================================</span> <span style="color:#111">FAILURES</span> <span style="color:#f92672">===================================</span>
________________________ test_square_positive_integers _________________________

    def test_square_positive_integers<span style="color:#f92672">()</span>:
        assert square<span style="color:#f92672">(</span><span style="color:#ae81ff">1</span><span style="color:#f92672">)</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>
        <span style="color:#75715e"># Note the mistake here! We&#39;ll leave this here to
</span><span style="color:#75715e"></span>        <span style="color:#75715e"># show what happens when a test fails.
</span><span style="color:#75715e"></span>&gt;       assert square<span style="color:#f92672">(</span><span style="color:#ae81ff">2</span><span style="color:#f92672">)</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">8</span>
E       assert <span style="color:#111">4</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">8</span>
E        +  where <span style="color:#111">4</span> <span style="color:#f92672">=</span> square<span style="color:#f92672">(</span><span style="color:#ae81ff">2</span><span style="color:#f92672">)</span>

test_functions.py:10: <span style="color:#111">AssertionError</span>
<span style="color:#f92672">===========================</span> <span style="color:#ae81ff">1</span> failed in <span style="color:#ae81ff">0</span>.16 <span style="color:#111">seconds</span> <span style="color:#f92672">===========================</span></code></pre></div>
<p>Note now, that we can see that a test has failed where we introduced the error in the test. We can now correct the test so that it&rsquo;s expecting the correct answer:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#00a8c8">def</span> <span style="color:#75af00">test_square_positive_integers</span><span style="color:#111">():</span>
    <span style="color:#00a8c8">assert</span> <span style="color:#111">square</span><span style="color:#111">(</span><span style="color:#ae81ff">1</span><span style="color:#111">)</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>
    <span style="color:#00a8c8">assert</span> <span style="color:#111">square</span><span style="color:#111">(</span><span style="color:#ae81ff">2</span><span style="color:#111">)</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">4</span>
    <span style="color:#00a8c8">assert</span> <span style="color:#111">square</span><span style="color:#111">(</span><span style="color:#ae81ff">4</span><span style="color:#111">)</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">16</span>
    <span style="color:#00a8c8">assert</span> <span style="color:#111">square</span><span style="color:#111">(</span><span style="color:#ae81ff">100</span><span style="color:#111">)</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">10000</span></code></pre></div>
<p>Now if we rerun pytest, we see something different:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">=============================</span> <span style="color:#111">test</span> session <span style="color:#111">starts</span> <span style="color:#f92672">==============================</span>
platform linux -- Python <span style="color:#ae81ff">3</span>.6.6, pytest-3.9.2, py-1.7.0, pluggy-0.8.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /io, inifile:
collecting ... collected <span style="color:#ae81ff">1</span> item

test_functions.py::test_square_positive_integers PASSED                  <span style="color:#f92672">[</span><span style="color:#ae81ff">100</span>%<span style="color:#f92672">]</span>

<span style="color:#f92672">===========================</span> <span style="color:#ae81ff">1</span> passed in <span style="color:#ae81ff">0</span>.21 <span style="color:#111">seconds</span> <span style="color:#f92672">===========================</span></code></pre></div>
<p>As many tests as are necessary can be written.</p>

<p>{{ panel theme=&ldquo;warning&rdquo; title=&ldquo;Exercise: Normalising a vector.&rdquo; }}</p>

<p>Consider as a really simple example, a function which normalises a vector. We&rsquo;re going to start and thing about how it should work.</p>

<p>If there are n elements in a vector, the norm is given by:
$$\sqrt{x_1^2 + x_2^2 + x_3^2 + x_4^2 + \cdots + x_n^2}$$</p>

<p>Various appropriate tests of this could check the results:</p>

<ul>
<li>If we pass an array full of integers or floating point numbers.</li>
<li>If we pass an array which is full of zeros.</li>
</ul>

<p>Write a test for each of these cases for a function with the function signature:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python3" data-lang="python3"><span style="color:#00a8c8">def</span> <span style="color:#75af00">normalise</span><span style="color:#111">(</span><span style="color:#111">v</span><span style="color:#111">):</span></code></pre></div>
<p>Then, implement the normalise function and see if your tests pass!</p>

<p>Note: To create an array in Python, you can use the following syntax:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python3" data-lang="python3"><span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#f92672">import</span> <span style="color:#111">numpy</span> <span style="color:#00a8c8">as</span> <span style="color:#111">np</span>


<span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#111">x</span> <span style="color:#f92672">=</span> <span style="color:#111">np</span><span style="color:#f92672">.</span><span style="color:#111">array</span><span style="color:#111">([</span><span style="color:#ae81ff">0.0</span><span style="color:#111">,</span> <span style="color:#ae81ff">1.0</span><span style="color:#111">])</span>
<span style="color:#75715e"># We can perform element-wise operations on NumPy arrays:</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#111">x</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>
<span style="color:#111">array</span><span style="color:#111">([</span><span style="color:#ae81ff">0.0</span><span style="color:#111">,</span> <span style="color:#ae81ff">0.5</span><span style="color:#111">])</span></code></pre></div>
<p>{{ /panel }}</p>

<h3 id="exceptions">Exceptions</h3>

<p>Most programming languages have the concept of exceptions. An exception is just a way of dealing erroneous conditions which happen while a programme is running which require special handling. In Python doing this in your own code is really straightforward. For example, when calculating the Coulomb potential in 1-D, we need to make sure that if the input distance is zero, the function raises an error, because the input argument is invalid. We can do this like:</p>

<pre><code>def CoulombPotential(r):
    if (r == 0):
        raise ValueError(&quot;r cannot equal zero.&quot;)
    return 1 / abs(r)
</code></pre>

<p>Now, when we run this code, if 0 is passed as an input argument:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#111">CoulombPotential</span><span style="color:#111">(</span><span style="color:#ae81ff">0</span><span style="color:#111">)</span>
<span style="color:#111">Traceback</span> <span style="color:#111">(</span><span style="color:#111">most</span> <span style="color:#111">recent</span> <span style="color:#111">call</span> <span style="color:#111">last</span><span style="color:#111">):</span>
  <span style="color:#111">File</span> <span style="color:#d88200">&#34;&lt;stdin&gt;&#34;</span><span style="color:#111">,</span> <span style="color:#111">line</span> <span style="color:#ae81ff">1</span><span style="color:#111">,</span> <span style="color:#f92672">in</span> <span style="color:#f92672">&lt;</span><span style="color:#111">module</span><span style="color:#f92672">&gt;</span>
  <span style="color:#111">File</span> <span style="color:#d88200">&#34;&lt;stdin&gt;&#34;</span><span style="color:#111">,</span> <span style="color:#111">line</span> <span style="color:#ae81ff">3</span><span style="color:#111">,</span> <span style="color:#f92672">in</span> <span style="color:#111">CoulombPotential</span>
<span style="color:#75af00">ValueError</span><span style="color:#111">:</span> <span style="color:#111">r</span> <span style="color:#111">cannot</span> <span style="color:#111">equal</span> <span style="color:#111">zero</span><span style="color:#f92672">.</span></code></pre></div>
<h3 id="debug-mode">Debug Mode</h3>

<p>Many people do not know that the Python interpreter runs in &lsquo;debug&rsquo; mode by default. When it is disabled, by running Python with the &lsquo;-O&rsquo; flag, <em>all asserts in code</em> are skipped, and the flag &lsquo;<strong>debug</strong>&rsquo; is set to True. Utilising this can be useful when you want to check code for correctness, but know that some checks you are running can be costly in performance. It can also be used to provide more</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#00a8c8">def</span> <span style="color:#75af00">square</span><span style="color:#111">(</span><span style="color:#111">x</span><span style="color:#111">):</span>
  <span style="color:#00a8c8">if</span> <span style="color:#111">__debug__</span><span style="color:#111">:</span>
    <span style="color:#00a8c8">print</span><span style="color:#111">(</span><span style="color:#d88200">&#34;We&#39;re in debug mode!&#34;</span><span style="color:#111">)</span>
  <span style="color:#00a8c8">assert</span> <span style="color:#111">type</span><span style="color:#111">(</span><span style="color:#111">x</span><span style="color:#111">)</span> <span style="color:#f92672">in</span> <span style="color:#111">[</span><span style="color:#111">int</span><span style="color:#111">,</span> <span style="color:#111">float</span><span style="color:#111">,</span> <span style="color:#111">complex</span><span style="color:#111">],</span> <span style="color:#d88200">&#34;Input argument x is not of a numeric type int, complex or float&#34;</span>
  <span style="color:#00a8c8">return</span> <span style="color:#111">x</span><span style="color:#f92672">*</span><span style="color:#111">x</span></code></pre></div>
<p>In debug mode, if we run the function, we get the following output:</p>

<pre><code>&gt;&gt;&gt; square(2)
We're in debug mode!
4
&gt;&gt;&gt; square('a')
We're in debug mode!
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;&lt;stdin&gt;&quot;, line 4, in square
AssertionError: Argument is not of a numeric type
</code></pre>

<p>When we instead run &lsquo;python3 -O&rsquo;, we see:</p>

<pre><code>&gt;&gt;&gt; square(2)
4
&gt;&gt;&gt; square('a')
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;&lt;stdin&gt;&quot;, line 5, in square
TypeError: can't multiply sequence by non-int of type 'str'
</code></pre>

<p>We can see that the print statement is completely skipped, and instead of our helpful error message which resulted from our check, we get Python&rsquo;s less helpful one.</p>

<div class="panel panel-info">
	<div class="panel-heading">C, C++ and FORTRAN Compilers</div>
	<div class="panel-body"><p>Achieving the same in compiled languages is also straightforward, because a preprocessor runs over the code before the compilation stage when a compiler is invoked. Macros can be used to disable code under certain conditions, and this is widely used to disable costly code paths that diagnose errors, which can be turned on when an issue is noticed. See for example the following code which multiplies two vectors in C++:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#00a8c8">void</span> <span style="color:#75af00">multiply_vector</span><span style="color:#111">(</span><span style="color:#00a8c8">const</span> <span style="color:#111">std</span><span style="color:#f92672">::</span><span style="color:#111">vector</span><span style="color:#f92672">&lt;</span><span style="color:#00a8c8">double</span><span style="color:#f92672">&gt;</span> <span style="color:#111">a</span><span style="color:#111">,</span>
                     <span style="color:#00a8c8">double</span> <span style="color:#111">b</span><span style="color:#111">,</span>
                     <span style="color:#111">std</span><span style="color:#f92672">::</span><span style="color:#111">vector</span><span style="color:#f92672">&lt;</span><span style="color:#00a8c8">double</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">&amp;</span><span style="color:#111">c</span><span style="color:#111">)</span> <span style="color:#111">{</span>

  <span style="color:#00a8c8">for</span><span style="color:#111">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span><span style="color:#111">;</span> <span style="color:#111">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#111">a</span><span style="color:#111">.</span><span style="color:#111">size</span><span style="color:#111">();</span> <span style="color:#111">i</span><span style="color:#f92672">++</span><span style="color:#111">)</span> <span style="color:#111">{</span>
    <span style="color:#111">c</span><span style="color:#111">[</span><span style="color:#111">i</span><span style="color:#111">]</span> <span style="color:#f92672">=</span> <span style="color:#111">a</span><span style="color:#111">[</span><span style="color:#111">i</span><span style="color:#111">]</span> <span style="color:#f92672">*</span> <span style="color:#111">b</span><span style="color:#111">;</span>
    <span style="color:#75715e">#ifdef MYPROJECT_DEBUG
</span><span style="color:#75715e"></span>        <span style="color:#111">std</span><span style="color:#f92672">::</span><span style="color:#111">cout</span> <span style="color:#f92672">&lt;&lt;</span> <span style="color:#d88200">&#34;c[&#34;</span> <span style="color:#f92672">&lt;&lt;</span> <span style="color:#111">i</span> <span style="color:#f92672">&lt;&lt;</span> <span style="color:#d88200">&#34;] = &#34;</span> <span style="color:#f92672">&lt;&lt;</span> <span style="color:#111">c</span><span style="color:#111">[</span><span style="color:#111">i</span><span style="color:#111">]</span> <span style="color:#f92672">&lt;&lt;</span> <span style="color:#111">std</span><span style="color:#f92672">::</span><span style="color:#111">endl</span><span style="color:#111">;</span>
    <span style="color:#75715e">#endif
</span><span style="color:#75715e"></span>  <span style="color:#111">}</span>
<span style="color:#111">}</span>
</code></pre></div>
<p>Compiling with g++, you can enable the printing of the array in this function just by passing a flag:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-g++" data-lang="g++">g++ file.cpp -DMYPROJECT_DEBUG -c</code></pre></div></div>
	
</div>


<h3 id="exercise-2-lennard-jones-6-12-potential">Exercise 2: Lennard-Jones 6-12 potential</h3>

<p>The Lennard-Jones potential is given by $$ V\left(r\right) = \epsilon \left[\left(\frac{r_m}{r}\right)^{12} - 2\left(\frac{r_m}{r}\right)^6\right]$$</p>

<ul>
<li>Write a function that takes three numbers - $$\epsilon$$, $$r_m$$ and $$r$$, and returns this potential.</li>
<li>Write a test for this function which checks values against known quantities.</li>
<li>Write a test that checks that the function throws a ValueError if numerical arguments are not passed.</li>
</ul>


    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/testing/" title="Testing Scientific Code"> <i class="fa fa-chevron-left"></i><label>Testing Scientific Code</label></a>
    <a class="nav nav-next" href="/testing/complex-tests/" title="Writing More Complex Tests" style="margin-right: 0px;"><label>Writing More Complex Tests</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

    
    <div class="date">
        <i class='fa fa-calendar'></i> Last update on 26/10/2018
    </div>
    

    
    <div class="github-link">
      <a href="https://github.com/vjeantet/hugo-theme-docdock/edit/master/exampleSite/content/testing/simple-tests.md" target="blank"><i class="fa fa-code-fork"></i>
        Improve this page</a>
    </div>
    
  </div>


	<div>


  
    Create a content/_footer.md file to customize the footer content
  



	</div>
</footer>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>



<script src="/theme-flex/script.js"></script>


    

    
    

    
  </body>
</html>